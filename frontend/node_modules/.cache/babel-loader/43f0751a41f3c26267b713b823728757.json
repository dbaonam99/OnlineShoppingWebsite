{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport $ from '../../utils/dom';\nimport { bindModuleMethods, getTranslate } from '../../utils/utils';\nvar Zoom = {\n  // Calc Scale From Multi-touches\n  getDistanceBetweenTouches: function getDistanceBetweenTouches(e) {\n    if (e.targetTouches.length < 2) return 1;\n    var x1 = e.targetTouches[0].pageX;\n    var y1 = e.targetTouches[0].pageY;\n    var x2 = e.targetTouches[1].pageX;\n    var y2 = e.targetTouches[1].pageY;\n    var distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    return distance;\n  },\n  // Events\n  onGestureStart: function onGestureStart(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n    zoom.fakeGestureTouched = false;\n    zoom.fakeGestureMoved = false;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = true;\n      gesture.scaleStart = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$slideEl || !gesture.$slideEl.length) {\n      gesture.$slideEl = $(e.target).closest(\".\" + swiper.params.slideClass);\n      if (gesture.$slideEl.length === 0) gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n      gesture.maxRatio = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n      if (gesture.$imageWrapEl.length === 0) {\n        gesture.$imageEl = undefined;\n        return;\n      }\n    }\n\n    if (gesture.$imageEl) {\n      gesture.$imageEl.transition(0);\n    }\n\n    swiper.zoom.isScaling = true;\n  },\n  onGestureChange: function onGestureChange(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureMoved = true;\n      gesture.scaleMove = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) {\n      if (e.type === 'gesturechange') zoom.onGestureStart(e);\n      return;\n    }\n\n    if (support.gestures) {\n      zoom.scale = e.scale * zoom.currentScale;\n    } else {\n      zoom.scale = gesture.scaleMove / gesture.scaleStart * zoom.currentScale;\n    }\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + Math.pow(zoom.scale - gesture.maxRatio + 1, 0.5);\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - Math.pow(params.minRatio - zoom.scale + 1, 0.5);\n    }\n\n    gesture.$imageEl.transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  onGestureEnd: function onGestureEnd(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (!zoom.fakeGestureTouched || !zoom.fakeGestureMoved) {\n        return;\n      }\n\n      if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2 && !device.android) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = false;\n      zoom.fakeGestureMoved = false;\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.$imageEl.transition(swiper.params.speed).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n    zoom.currentScale = zoom.scale;\n    zoom.isScaling = false;\n    if (zoom.scale === 1) gesture.$slideEl = undefined;\n  },\n  onTouchStart: function onTouchStart(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  },\n  onTouchMove: function onTouchMove(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    swiper.allowClick = false;\n    if (!image.isTouched || !gesture.$slideEl) return;\n\n    if (!image.isMoved) {\n      image.width = gesture.$imageEl[0].offsetWidth;\n      image.height = gesture.$imageEl[0].offsetHeight;\n      image.startX = getTranslate(gesture.$imageWrapEl[0], 'x') || 0;\n      image.startY = getTranslate(gesture.$imageWrapEl[0], 'y') || 0;\n      gesture.slideWidth = gesture.$slideEl[0].offsetWidth;\n      gesture.slideHeight = gesture.$slideEl[0].offsetHeight;\n      gesture.$imageWrapEl.transition(0);\n\n      if (swiper.rtl) {\n        image.startX = -image.startX;\n        image.startY = -image.startY;\n      }\n    } // Define if we need image drag\n\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    if (scaledWidth < gesture.slideWidth && scaledHeight < gesture.slideHeight) return;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n    if (!image.isMoved && !zoom.isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    image.isMoved = true;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX;\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY;\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - Math.pow(image.minX - image.currentX + 1, 0.8);\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + Math.pow(image.currentX - image.maxX + 1, 0.8);\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - Math.pow(image.minY - image.currentY + 1, 0.8);\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + Math.pow(image.currentY - image.maxY + 1, 0.8);\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.$imageWrapEl.transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTouchEnd: function onTouchEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    var momentumDurationX = 300;\n    var momentumDurationY = 300;\n    var momentumDistanceX = velocity.x * momentumDurationX;\n    var newPositionX = image.currentX + momentumDistanceX;\n    var momentumDistanceY = velocity.y * momentumDurationY;\n    var newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    var momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.$imageWrapEl.transition(momentumDuration).transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTransitionEnd: function onTransitionEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (gesture.$slideEl && swiper.previousIndex !== swiper.activeIndex) {\n      if (gesture.$imageEl) {\n        gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');\n      }\n\n      if (gesture.$imageWrapEl) {\n        gesture.$imageWrapEl.transform('translate3d(0,0,0)');\n      }\n\n      zoom.scale = 1;\n      zoom.currentScale = 1;\n      gesture.$slideEl = undefined;\n      gesture.$imageEl = undefined;\n      gesture.$imageWrapEl = undefined;\n    }\n  },\n  // Toggle Zoom\n  toggle: function toggle(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoom.out();\n    } else {\n      // Zoom In\n      zoom.in(e);\n    }\n  },\n  in: function _in(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    gesture.$slideEl.addClass(\"\" + params.zoomedSlideClass);\n    var touchX;\n    var touchY;\n    var offsetX;\n    var offsetY;\n    var diffX;\n    var diffY;\n    var translateX;\n    var translateY;\n    var imageWidth;\n    var imageHeight;\n    var scaledWidth;\n    var scaledHeight;\n    var translateMinX;\n    var translateMinY;\n    var translateMaxX;\n    var translateMaxY;\n    var slideWidth;\n    var slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n      touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    zoom.scale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n    zoom.currentScale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n    if (e) {\n      slideWidth = gesture.$slideEl[0].offsetWidth;\n      slideHeight = gesture.$slideEl[0].offsetHeight;\n      offsetX = gesture.$slideEl.offset().left;\n      offsetY = gesture.$slideEl.offset().top;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.$imageEl[0].offsetWidth;\n      imageHeight = gesture.$imageEl[0].offsetHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      translateX = diffX * zoom.scale;\n      translateY = diffY * zoom.scale;\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    gesture.$imageWrapEl.transition(300).transform(\"translate3d(\" + translateX + \"px, \" + translateY + \"px,0)\");\n    gesture.$imageEl.transition(300).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  out: function out() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = 1;\n    zoom.currentScale = 1;\n    gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');\n    gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');\n    gesture.$slideEl.removeClass(\"\" + params.zoomedSlideClass);\n    gesture.$slideEl = undefined;\n  },\n  toggleGestures: function toggleGestures(method) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var selector = zoom.slideSelector,\n        passive = zoom.passiveListener;\n    swiper.$wrapperEl[method]('gesturestart', selector, zoom.onGestureStart, passive);\n    swiper.$wrapperEl[method]('gesturechange', selector, zoom.onGestureChange, passive);\n    swiper.$wrapperEl[method]('gestureend', selector, zoom.onGestureEnd, passive);\n  },\n  enableGestures: function enableGestures() {\n    if (this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = true;\n    this.zoom.toggleGestures('on');\n  },\n  disableGestures: function disableGestures() {\n    if (!this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = false;\n    this.zoom.toggleGestures('off');\n  },\n  // Attach/Detach Events\n  enable: function enable() {\n    var swiper = this;\n    var support = swiper.support;\n    var zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass;\n    swiper.zoom.passiveListener = passiveListener;\n    swiper.zoom.slideSelector = slideSelector; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.on(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.on(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  },\n  disable: function disable() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    var support = swiper.support;\n    swiper.zoom.enabled = false;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.off(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.off(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  }\n};\nexport default {\n  name: 'zoom',\n  params: {\n    zoom: {\n      enabled: false,\n      maxRatio: 3,\n      minRatio: 1,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  },\n  create: function create() {\n    var swiper = this;\n    bindModuleMethods(swiper, {\n      zoom: _extends({\n        enabled: false,\n        scale: 1,\n        currentScale: 1,\n        isScaling: false,\n        gesture: {\n          $slideEl: undefined,\n          slideWidth: undefined,\n          slideHeight: undefined,\n          $imageEl: undefined,\n          $imageWrapEl: undefined,\n          maxRatio: 3\n        },\n        image: {\n          isTouched: undefined,\n          isMoved: undefined,\n          currentX: undefined,\n          currentY: undefined,\n          minX: undefined,\n          minY: undefined,\n          maxX: undefined,\n          maxY: undefined,\n          width: undefined,\n          height: undefined,\n          startX: undefined,\n          startY: undefined,\n          touchesStart: {},\n          touchesCurrent: {}\n        },\n        velocity: {\n          x: undefined,\n          y: undefined,\n          prevPositionX: undefined,\n          prevPositionY: undefined,\n          prevTime: undefined\n        }\n      }, Zoom)\n    });\n    var scale = 1;\n    Object.defineProperty(swiper.zoom, 'scale', {\n      get: function get() {\n        return scale;\n      },\n      set: function set(value) {\n        if (scale !== value) {\n          var imageEl = swiper.zoom.gesture.$imageEl ? swiper.zoom.gesture.$imageEl[0] : undefined;\n          var slideEl = swiper.zoom.gesture.$slideEl ? swiper.zoom.gesture.$slideEl[0] : undefined;\n          swiper.emit('zoomChange', value, imageEl, slideEl);\n        }\n\n        scale = value;\n      }\n    });\n  },\n  on: {\n    init: function init(swiper) {\n      if (swiper.params.zoom.enabled) {\n        swiper.zoom.enable();\n      }\n    },\n    destroy: function destroy(swiper) {\n      swiper.zoom.disable();\n    },\n    touchStart: function touchStart(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchStart(e);\n    },\n    touchEnd: function touchEnd(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchEnd(e);\n    },\n    doubleTap: function doubleTap(swiper, e) {\n      if (swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n        swiper.zoom.toggle(e);\n      }\n    },\n    transitionEnd: function transitionEnd(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n        swiper.zoom.onTransitionEnd();\n      }\n    },\n    slideChange: function slideChange(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n        swiper.zoom.onTransitionEnd();\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/node_modules/swiper/esm/components/zoom/zoom.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","$","bindModuleMethods","getTranslate","Zoom","getDistanceBetweenTouches","e","targetTouches","x1","pageX","y1","pageY","x2","y2","distance","Math","sqrt","pow","onGestureStart","swiper","support","params","zoom","gesture","fakeGestureTouched","fakeGestureMoved","gestures","type","scaleStart","$slideEl","closest","slideClass","slides","eq","activeIndex","$imageEl","find","$imageWrapEl","parent","containerClass","maxRatio","attr","undefined","transition","isScaling","onGestureChange","scaleMove","scale","currentScale","minRatio","transform","onGestureEnd","device","changedTouches","android","max","min","speed","onTouchStart","image","isTouched","cancelable","preventDefault","touchesStart","x","y","onTouchMove","velocity","allowClick","isMoved","width","offsetWidth","height","offsetHeight","startX","startY","slideWidth","slideHeight","rtl","scaledWidth","scaledHeight","minX","maxX","minY","maxY","touchesCurrent","isHorizontal","floor","stopPropagation","currentX","currentY","prevPositionX","prevPositionY","prevTime","Date","now","abs","onTouchEnd","momentumDurationX","momentumDurationY","momentumDistanceX","newPositionX","momentumDistanceY","newPositionY","momentumDuration","onTransitionEnd","previousIndex","toggle","out","in","_in","virtual","enabled","$wrapperEl","children","slideActiveClass","addClass","zoomedSlideClass","touchX","touchY","offsetX","offsetY","diffX","diffY","translateX","translateY","imageWidth","imageHeight","translateMinX","translateMinY","translateMaxX","translateMaxY","offset","left","top","removeClass","toggleGestures","method","selector","slideSelector","passive","passiveListener","enableGestures","gesturesEnabled","disableGestures","enable","touchEvents","start","passiveListeners","capture","activeListenerWithCapture","on","end","move","cancel","disable","off","name","create","defineProperty","get","set","value","imageEl","slideEl","emit","init","destroy","touchStart","touchEnd","doubleTap","transitionEnd","slideChange","cssMode"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport $ from '../../utils/dom';\nimport { bindModuleMethods, getTranslate } from '../../utils/utils';\nvar Zoom = {\n  // Calc Scale From Multi-touches\n  getDistanceBetweenTouches: function getDistanceBetweenTouches(e) {\n    if (e.targetTouches.length < 2) return 1;\n    var x1 = e.targetTouches[0].pageX;\n    var y1 = e.targetTouches[0].pageY;\n    var x2 = e.targetTouches[1].pageX;\n    var y2 = e.targetTouches[1].pageY;\n    var distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    return distance;\n  },\n  // Events\n  onGestureStart: function onGestureStart(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n    zoom.fakeGestureTouched = false;\n    zoom.fakeGestureMoved = false;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = true;\n      gesture.scaleStart = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$slideEl || !gesture.$slideEl.length) {\n      gesture.$slideEl = $(e.target).closest(\".\" + swiper.params.slideClass);\n      if (gesture.$slideEl.length === 0) gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n      gesture.maxRatio = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n      if (gesture.$imageWrapEl.length === 0) {\n        gesture.$imageEl = undefined;\n        return;\n      }\n    }\n\n    if (gesture.$imageEl) {\n      gesture.$imageEl.transition(0);\n    }\n\n    swiper.zoom.isScaling = true;\n  },\n  onGestureChange: function onGestureChange(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureMoved = true;\n      gesture.scaleMove = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) {\n      if (e.type === 'gesturechange') zoom.onGestureStart(e);\n      return;\n    }\n\n    if (support.gestures) {\n      zoom.scale = e.scale * zoom.currentScale;\n    } else {\n      zoom.scale = gesture.scaleMove / gesture.scaleStart * zoom.currentScale;\n    }\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + Math.pow(zoom.scale - gesture.maxRatio + 1, 0.5);\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - Math.pow(params.minRatio - zoom.scale + 1, 0.5);\n    }\n\n    gesture.$imageEl.transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  onGestureEnd: function onGestureEnd(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (!zoom.fakeGestureTouched || !zoom.fakeGestureMoved) {\n        return;\n      }\n\n      if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2 && !device.android) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = false;\n      zoom.fakeGestureMoved = false;\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.$imageEl.transition(swiper.params.speed).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n    zoom.currentScale = zoom.scale;\n    zoom.isScaling = false;\n    if (zoom.scale === 1) gesture.$slideEl = undefined;\n  },\n  onTouchStart: function onTouchStart(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  },\n  onTouchMove: function onTouchMove(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    swiper.allowClick = false;\n    if (!image.isTouched || !gesture.$slideEl) return;\n\n    if (!image.isMoved) {\n      image.width = gesture.$imageEl[0].offsetWidth;\n      image.height = gesture.$imageEl[0].offsetHeight;\n      image.startX = getTranslate(gesture.$imageWrapEl[0], 'x') || 0;\n      image.startY = getTranslate(gesture.$imageWrapEl[0], 'y') || 0;\n      gesture.slideWidth = gesture.$slideEl[0].offsetWidth;\n      gesture.slideHeight = gesture.$slideEl[0].offsetHeight;\n      gesture.$imageWrapEl.transition(0);\n\n      if (swiper.rtl) {\n        image.startX = -image.startX;\n        image.startY = -image.startY;\n      }\n    } // Define if we need image drag\n\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    if (scaledWidth < gesture.slideWidth && scaledHeight < gesture.slideHeight) return;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n    if (!image.isMoved && !zoom.isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    image.isMoved = true;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX;\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY;\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - Math.pow(image.minX - image.currentX + 1, 0.8);\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + Math.pow(image.currentX - image.maxX + 1, 0.8);\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - Math.pow(image.minY - image.currentY + 1, 0.8);\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + Math.pow(image.currentY - image.maxY + 1, 0.8);\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.$imageWrapEl.transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTouchEnd: function onTouchEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    var momentumDurationX = 300;\n    var momentumDurationY = 300;\n    var momentumDistanceX = velocity.x * momentumDurationX;\n    var newPositionX = image.currentX + momentumDistanceX;\n    var momentumDistanceY = velocity.y * momentumDurationY;\n    var newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    var momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.$imageWrapEl.transition(momentumDuration).transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTransitionEnd: function onTransitionEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (gesture.$slideEl && swiper.previousIndex !== swiper.activeIndex) {\n      if (gesture.$imageEl) {\n        gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');\n      }\n\n      if (gesture.$imageWrapEl) {\n        gesture.$imageWrapEl.transform('translate3d(0,0,0)');\n      }\n\n      zoom.scale = 1;\n      zoom.currentScale = 1;\n      gesture.$slideEl = undefined;\n      gesture.$imageEl = undefined;\n      gesture.$imageWrapEl = undefined;\n    }\n  },\n  // Toggle Zoom\n  toggle: function toggle(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoom.out();\n    } else {\n      // Zoom In\n      zoom.in(e);\n    }\n  },\n  in: function _in(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    gesture.$slideEl.addClass(\"\" + params.zoomedSlideClass);\n    var touchX;\n    var touchY;\n    var offsetX;\n    var offsetY;\n    var diffX;\n    var diffY;\n    var translateX;\n    var translateY;\n    var imageWidth;\n    var imageHeight;\n    var scaledWidth;\n    var scaledHeight;\n    var translateMinX;\n    var translateMinY;\n    var translateMaxX;\n    var translateMaxY;\n    var slideWidth;\n    var slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n      touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    zoom.scale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n    zoom.currentScale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n    if (e) {\n      slideWidth = gesture.$slideEl[0].offsetWidth;\n      slideHeight = gesture.$slideEl[0].offsetHeight;\n      offsetX = gesture.$slideEl.offset().left;\n      offsetY = gesture.$slideEl.offset().top;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.$imageEl[0].offsetWidth;\n      imageHeight = gesture.$imageEl[0].offsetHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      translateX = diffX * zoom.scale;\n      translateY = diffY * zoom.scale;\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    gesture.$imageWrapEl.transition(300).transform(\"translate3d(\" + translateX + \"px, \" + translateY + \"px,0)\");\n    gesture.$imageEl.transition(300).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  out: function out() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = 1;\n    zoom.currentScale = 1;\n    gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');\n    gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');\n    gesture.$slideEl.removeClass(\"\" + params.zoomedSlideClass);\n    gesture.$slideEl = undefined;\n  },\n  toggleGestures: function toggleGestures(method) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var selector = zoom.slideSelector,\n        passive = zoom.passiveListener;\n    swiper.$wrapperEl[method]('gesturestart', selector, zoom.onGestureStart, passive);\n    swiper.$wrapperEl[method]('gesturechange', selector, zoom.onGestureChange, passive);\n    swiper.$wrapperEl[method]('gestureend', selector, zoom.onGestureEnd, passive);\n  },\n  enableGestures: function enableGestures() {\n    if (this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = true;\n    this.zoom.toggleGestures('on');\n  },\n  disableGestures: function disableGestures() {\n    if (!this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = false;\n    this.zoom.toggleGestures('off');\n  },\n  // Attach/Detach Events\n  enable: function enable() {\n    var swiper = this;\n    var support = swiper.support;\n    var zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass;\n    swiper.zoom.passiveListener = passiveListener;\n    swiper.zoom.slideSelector = slideSelector; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.on(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.on(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  },\n  disable: function disable() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    var support = swiper.support;\n    swiper.zoom.enabled = false;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.off(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.off(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  }\n};\nexport default {\n  name: 'zoom',\n  params: {\n    zoom: {\n      enabled: false,\n      maxRatio: 3,\n      minRatio: 1,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  },\n  create: function create() {\n    var swiper = this;\n    bindModuleMethods(swiper, {\n      zoom: _extends({\n        enabled: false,\n        scale: 1,\n        currentScale: 1,\n        isScaling: false,\n        gesture: {\n          $slideEl: undefined,\n          slideWidth: undefined,\n          slideHeight: undefined,\n          $imageEl: undefined,\n          $imageWrapEl: undefined,\n          maxRatio: 3\n        },\n        image: {\n          isTouched: undefined,\n          isMoved: undefined,\n          currentX: undefined,\n          currentY: undefined,\n          minX: undefined,\n          minY: undefined,\n          maxX: undefined,\n          maxY: undefined,\n          width: undefined,\n          height: undefined,\n          startX: undefined,\n          startY: undefined,\n          touchesStart: {},\n          touchesCurrent: {}\n        },\n        velocity: {\n          x: undefined,\n          y: undefined,\n          prevPositionX: undefined,\n          prevPositionY: undefined,\n          prevTime: undefined\n        }\n      }, Zoom)\n    });\n    var scale = 1;\n    Object.defineProperty(swiper.zoom, 'scale', {\n      get: function get() {\n        return scale;\n      },\n      set: function set(value) {\n        if (scale !== value) {\n          var imageEl = swiper.zoom.gesture.$imageEl ? swiper.zoom.gesture.$imageEl[0] : undefined;\n          var slideEl = swiper.zoom.gesture.$slideEl ? swiper.zoom.gesture.$slideEl[0] : undefined;\n          swiper.emit('zoomChange', value, imageEl, slideEl);\n        }\n\n        scale = value;\n      }\n    });\n  },\n  on: {\n    init: function init(swiper) {\n      if (swiper.params.zoom.enabled) {\n        swiper.zoom.enable();\n      }\n    },\n    destroy: function destroy(swiper) {\n      swiper.zoom.disable();\n    },\n    touchStart: function touchStart(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchStart(e);\n    },\n    touchEnd: function touchEnd(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchEnd(e);\n    },\n    doubleTap: function doubleTap(swiper, e) {\n      if (swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n        swiper.zoom.toggle(e);\n      }\n    },\n    transitionEnd: function transitionEnd(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n        swiper.zoom.onTransitionEnd();\n      }\n    },\n    slideChange: function slideChange(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n        swiper.zoom.onTransitionEnd();\n      }\n    }\n  }\n};"]},"metadata":{},"sourceType":"module"}