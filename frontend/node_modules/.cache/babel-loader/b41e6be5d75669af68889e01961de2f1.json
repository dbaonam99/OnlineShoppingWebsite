{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports._renderLabels = _renderLabels, exports.render = exports.update = void 0;\n\nvar _d = require(\"d3\"),\n    _isEmpty = _interopRequireDefault(require(\"lodash-es/isEmpty\")),\n    _isArray = _interopRequireDefault(require(\"lodash-es/isArray\")),\n    _util = require(\"../util\"),\n    _getNeedleTransition = require(\"../util/get-needle-transition\"),\n    _configure = require(\"../config/configure\"),\n    update = function (a) {\n  var b = a.d3_refs,\n      c = a.newValue,\n      d = a.config,\n      e = (0, _configure.configureScale)(d),\n      f = e(c),\n      g = d.maxAngle - d.minAngle,\n      h = d.minAngle + f * g;\n  b.pointer.transition().duration(d.needleTransitionDuration).ease((0, _getNeedleTransition.getNeedleTransition)(d.needleTransition)).attr(\"transform\", \"rotate(\".concat(h, \")\")), b.current_value_text.text((0, _util.formatCurrentValueText)(c, d));\n};\n\nexports.update = update;\n\nvar render = function (a) {\n  var b = a.container,\n      c = a.config,\n      d = (0, _util.getRadius)(c),\n      e = (0, _util.centerTranslation)(d, c.paddingHorizontal, c.paddingVertical),\n      f = _renderSVG({\n    container: b,\n    config: c\n  });\n\n  return _renderArcs({\n    config: c,\n    svg: f,\n    centerTx: e\n  }), _renderLabels({\n    config: c,\n    svg: f,\n    centerTx: e,\n    r: d\n  }), {\n    current_value_text: _renderCurrentValueText({\n      config: c,\n      svg: f\n    }),\n    pointer: _renderNeedle({\n      config: c,\n      svg: f,\n      r: d,\n      centerTx: e\n    })\n  };\n};\n\nexports.render = render;\n\nfunction _renderSVG(a) {\n  var b = a.container,\n      c = a.config,\n      d = c.width + 2 * c.paddingHorizontal,\n      e = c.height + 2 * c.paddingVertical;\n  return (0, _d.select)(b).append(\"svg:svg\").attr(\"class\", \"speedometer\").attr(\"width\", \"\".concat(d).concat(c.dimensionUnit)).attr(\"height\", \"\".concat(e).concat(c.dimensionUnit)).style(\"width\", \"\".concat(d).concat(c.dimensionUnit)).style(\"height\", \"\".concat(e).concat(c.dimensionUnit));\n}\n\nfunction _renderArcs(a) {\n  var b = a.config,\n      c = a.svg,\n      d = a.centerTx,\n      e = (0, _configure.configureTickData)(b),\n      f = (0, _configure.configureArc)(b),\n      g = c.append(\"g\").attr(\"class\", \"arc\").attr(\"transform\", d);\n  g.selectAll(\"path\").data(e).enter().append(\"path\").attr(\"class\", \"speedo-segment\").attr(\"fill\", function (a, c) {\n    return !(0, _isEmpty[\"default\"])(b.segmentColors) && b.segmentColors[c] ? b.segmentColors[c] : b.arcColorFn(a * c);\n  }).attr(\"d\", f);\n}\n\nfunction _renderLabels(a) {\n  var b = a.config,\n      c = a.svg,\n      d = a.centerTx,\n      e = a.r,\n      f = (0, _configure.configureTicks)(b),\n      g = (0, _configure.configureTickData)(b),\n      h = (0, _configure.configureScale)(b),\n      j = b.maxAngle - b.minAngle,\n      k = b.customSegmentLabels,\n      l = (0, _isArray[\"default\"])(k) && !(0, _isEmpty[\"default\"])(k),\n      m = l && k.length === g.length;\n  if (l && !m) throw new Error(\"Custom Segment Labels should be an array with length of \".concat(g.length));\n  if (l && m) return void _renderCustomSegmentLabels({\n    config: b,\n    svg: c,\n    centerTx: d,\n    r: e,\n    ticks: f,\n    tickData: g,\n    scale: h,\n    range: j\n  });\n  var n = c.append(\"g\").attr(\"class\", \"label\").attr(\"transform\", d);\n  n.selectAll(\"text\").data(f).enter().append(\"text\").attr(\"transform\", function (a, c) {\n    var d = 0 === b.customSegmentStops.length ? h(a) : (0, _util.sumArrayTill)(g, c),\n        f = b.minAngle + d * j;\n    return \"rotate(\".concat(f, \") translate(0, \").concat(b.labelInset - e, \")\");\n  }).text(b.labelFormat).attr(\"class\", \"segment-value\").style(\"text-anchor\", \"middle\").style(\"font-size\", b.labelFontSize).style(\"font-weight\", \"bold\").style(\"fill\", b.textColor);\n}\n\nfunction _renderCustomSegmentLabels(a) {\n  function b(a, b) {\n    var d = 0 === l.length ? j(a) : (0, _util.sumArrayTill)(h, b),\n        e = c.minAngle + d * k;\n    return e;\n  }\n\n  var c = a.config,\n      d = a.svg,\n      e = a.centerTx,\n      f = a.r,\n      g = a.ticks,\n      h = a.tickData,\n      j = a.scale,\n      k = a.range,\n      l = c.customSegmentStops,\n      m = c.customSegmentLabels,\n      n = m.map(function (a, c) {\n    var d = c,\n        e = c + 1,\n        f = g[d],\n        h = b(f, d),\n        i = g[e],\n        j = b(i, e);\n    return (j + h) / 2;\n  }),\n      o = f - c.ringWidth - c.ringInset,\n      p = f - c.ringInset,\n      q = d.append(\"g\").attr(\"class\", \"label\").attr(\"transform\", e);\n  q.selectAll(\"text\").data(m).enter().append(\"text\").attr(\"transform\", function (a, b) {\n    var d = n[b],\n        e = \"rotate(\".concat(d, \") translate(0, \").concat(c.labelInset - f, \")\"),\n        g = \"rotate(\".concat(d, \") translate(0, \").concat(c.labelInset / 2 - (p - (p - o) / 2), \")\");\n    return \"OUTSIDE\" === a.position ? e : g;\n  }).text(function (a) {\n    return a.text || \"\";\n  }).attr(\"class\", \"segment-value\").style(\"text-anchor\", \"middle\").style(\"font-size\", function (a) {\n    return a.fontSize || c.labelFontSize;\n  }).style(\"font-weight\", \"bold\").style(\"fill\", function (a) {\n    return a.color || c.textColor;\n  });\n}\n\nfunction _renderCurrentValueText(a) {\n  var b = a.config,\n      c = a.svg,\n      d = (b.width + 2 * b.paddingHorizontal) / 2,\n      e = (b.width + 4 * b.paddingVertical) / 2;\n  return c.append(\"g\").attr(\"transform\", \"translate(\".concat(d, \", \").concat(e, \")\")).append(\"text\").attr(\"class\", \"current-value\").attr(\"text-anchor\", \"middle\").attr(\"y\", 23).text(b.currentValue).style(\"font-size\", b.valueTextFontSize).style(\"font-weight\", b.valueTextFontWeight).style(\"fill\", b.textColor);\n}\n\nfunction _renderNeedle(a) {\n  var b = a.config,\n      c = a.svg,\n      d = a.r,\n      e = a.centerTx,\n      f = (0, _util.calculateNeedleHeight)({\n    heightRatio: b.needleHeightRatio,\n    radius: d\n  }),\n      g = [[b.pointerWidth / 2, 0], [0, -f], [-(b.pointerWidth / 2), 0], [0, b.pointerTailLength], [b.pointerWidth / 2, 0]],\n      h = (0, _d.line)().curve(_d.curveMonotoneX),\n      i = c.append(\"g\").data([g]).attr(\"class\", \"pointer\").attr(\"transform\", e).style(\"fill\", b.needleColor);\n  return i.append(\"path\").attr(\"d\", h).attr(\"transform\", \"rotate(\".concat(b.minAngle, \")\"));\n}","map":{"version":3,"sources":["/Users/namduong/Documents/dev/shop-project/node_modules/react-d3-speedometer/dist/core/render/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_renderLabels","render","update","_d","_isEmpty","_isArray","_util","_getNeedleTransition","_configure","a","b","d3_refs","c","newValue","d","config","e","configureScale","f","g","maxAngle","minAngle","h","pointer","transition","duration","needleTransitionDuration","ease","getNeedleTransition","needleTransition","attr","concat","current_value_text","text","formatCurrentValueText","container","getRadius","centerTranslation","paddingHorizontal","paddingVertical","_renderSVG","_renderArcs","svg","centerTx","r","_renderCurrentValueText","_renderNeedle","width","height","select","append","dimensionUnit","style","configureTickData","configureArc","selectAll","data","enter","segmentColors","arcColorFn","configureTicks","j","k","customSegmentLabels","l","m","length","Error","_renderCustomSegmentLabels","ticks","tickData","scale","range","n","customSegmentStops","sumArrayTill","labelInset","labelFormat","labelFontSize","textColor","map","i","o","ringWidth","ringInset","p","q","position","fontSize","color","currentValue","valueTextFontSize","valueTextFontWeight","calculateNeedleHeight","heightRatio","needleHeightRatio","radius","pointerWidth","pointerTailLength","line","curve","curveMonotoneX","needleColor"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:!0}),exports._renderLabels=_renderLabels,exports.render=exports.update=void 0;var _d=require(\"d3\"),_isEmpty=_interopRequireDefault(require(\"lodash-es/isEmpty\")),_isArray=_interopRequireDefault(require(\"lodash-es/isArray\")),_util=require(\"../util\"),_getNeedleTransition=require(\"../util/get-needle-transition\"),_configure=require(\"../config/configure\"),update=function(a){var b=a.d3_refs,c=a.newValue,d=a.config,e=(0,_configure.configureScale)(d),f=e(c),g=d.maxAngle-d.minAngle,h=d.minAngle+f*g;b.pointer.transition().duration(d.needleTransitionDuration).ease((0,_getNeedleTransition.getNeedleTransition)(d.needleTransition)).attr(\"transform\",\"rotate(\".concat(h,\")\")),b.current_value_text.text((0,_util.formatCurrentValueText)(c,d))};exports.update=update;var render=function(a){var b=a.container,c=a.config,d=(0,_util.getRadius)(c),e=(0,_util.centerTranslation)(d,c.paddingHorizontal,c.paddingVertical),f=_renderSVG({container:b,config:c});return _renderArcs({config:c,svg:f,centerTx:e}),_renderLabels({config:c,svg:f,centerTx:e,r:d}),{current_value_text:_renderCurrentValueText({config:c,svg:f}),pointer:_renderNeedle({config:c,svg:f,r:d,centerTx:e})}};exports.render=render;function _renderSVG(a){var b=a.container,c=a.config,d=c.width+2*c.paddingHorizontal,e=c.height+2*c.paddingVertical;return(0,_d.select)(b).append(\"svg:svg\").attr(\"class\",\"speedometer\").attr(\"width\",\"\".concat(d).concat(c.dimensionUnit)).attr(\"height\",\"\".concat(e).concat(c.dimensionUnit)).style(\"width\",\"\".concat(d).concat(c.dimensionUnit)).style(\"height\",\"\".concat(e).concat(c.dimensionUnit))}function _renderArcs(a){var b=a.config,c=a.svg,d=a.centerTx,e=(0,_configure.configureTickData)(b),f=(0,_configure.configureArc)(b),g=c.append(\"g\").attr(\"class\",\"arc\").attr(\"transform\",d);g.selectAll(\"path\").data(e).enter().append(\"path\").attr(\"class\",\"speedo-segment\").attr(\"fill\",function(a,c){return!(0,_isEmpty[\"default\"])(b.segmentColors)&&b.segmentColors[c]?b.segmentColors[c]:b.arcColorFn(a*c)}).attr(\"d\",f)}function _renderLabels(a){var b=a.config,c=a.svg,d=a.centerTx,e=a.r,f=(0,_configure.configureTicks)(b),g=(0,_configure.configureTickData)(b),h=(0,_configure.configureScale)(b),j=b.maxAngle-b.minAngle,k=b.customSegmentLabels,l=(0,_isArray[\"default\"])(k)&&!(0,_isEmpty[\"default\"])(k),m=l&&k.length===g.length;if(l&&!m)throw new Error(\"Custom Segment Labels should be an array with length of \".concat(g.length));if(l&&m)return void _renderCustomSegmentLabels({config:b,svg:c,centerTx:d,r:e,ticks:f,tickData:g,scale:h,range:j});var n=c.append(\"g\").attr(\"class\",\"label\").attr(\"transform\",d);n.selectAll(\"text\").data(f).enter().append(\"text\").attr(\"transform\",function(a,c){var d=0===b.customSegmentStops.length?h(a):(0,_util.sumArrayTill)(g,c),f=b.minAngle+d*j;return\"rotate(\".concat(f,\") translate(0, \").concat(b.labelInset-e,\")\")}).text(b.labelFormat).attr(\"class\",\"segment-value\").style(\"text-anchor\",\"middle\").style(\"font-size\",b.labelFontSize).style(\"font-weight\",\"bold\").style(\"fill\",b.textColor)}function _renderCustomSegmentLabels(a){function b(a,b){var d=0===l.length?j(a):(0,_util.sumArrayTill)(h,b),e=c.minAngle+d*k;return e}var c=a.config,d=a.svg,e=a.centerTx,f=a.r,g=a.ticks,h=a.tickData,j=a.scale,k=a.range,l=c.customSegmentStops,m=c.customSegmentLabels,n=m.map(function(a,c){var d=c,e=c+1,f=g[d],h=b(f,d),i=g[e],j=b(i,e);return(j+h)/2}),o=f-c.ringWidth-c.ringInset,p=f-c.ringInset,q=d.append(\"g\").attr(\"class\",\"label\").attr(\"transform\",e);q.selectAll(\"text\").data(m).enter().append(\"text\").attr(\"transform\",function(a,b){var d=n[b],e=\"rotate(\".concat(d,\") translate(0, \").concat(c.labelInset-f,\")\"),g=\"rotate(\".concat(d,\") translate(0, \").concat(c.labelInset/2-(p-(p-o)/2),\")\");return\"OUTSIDE\"===a.position?e:g}).text(function(a){return a.text||\"\"}).attr(\"class\",\"segment-value\").style(\"text-anchor\",\"middle\").style(\"font-size\",function(a){return a.fontSize||c.labelFontSize}).style(\"font-weight\",\"bold\").style(\"fill\",function(a){return a.color||c.textColor})}function _renderCurrentValueText(a){var b=a.config,c=a.svg,d=(b.width+2*b.paddingHorizontal)/2,e=(b.width+4*b.paddingVertical)/2;return c.append(\"g\").attr(\"transform\",\"translate(\".concat(d,\", \").concat(e,\")\")).append(\"text\").attr(\"class\",\"current-value\").attr(\"text-anchor\",\"middle\").attr(\"y\",23).text(b.currentValue).style(\"font-size\",b.valueTextFontSize).style(\"font-weight\",b.valueTextFontWeight).style(\"fill\",b.textColor)}function _renderNeedle(a){var b=a.config,c=a.svg,d=a.r,e=a.centerTx,f=(0,_util.calculateNeedleHeight)({heightRatio:b.needleHeightRatio,radius:d}),g=[[b.pointerWidth/2,0],[0,-f],[-(b.pointerWidth/2),0],[0,b.pointerTailLength],[b.pointerWidth/2,0]],h=(0,_d.line)().curve(_d.curveMonotoneX),i=c.append(\"g\").data([g]).attr(\"class\",\"pointer\").attr(\"transform\",e).style(\"fill\",b.needleColor);return i.append(\"path\").attr(\"d\",h).attr(\"transform\",\"rotate(\".concat(b.minAngle,\")\"))}"]},"metadata":{},"sourceType":"script"}